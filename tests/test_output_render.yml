# Each yaml doc is a test case
---
name: no changes
local: |
  ---
  - job:
      name: test job
      display-name: Test Job
      description: |
        A test job

        Team: Test
      project-type: freestyle
      concurrent: false
      properties:
        - build-discarder:
            num-to-keep: 10
      triggers: [ { timed: '@hourly' } ]
      builders:
        - shell: |
            #!/usr/bin/env bash
            set -eux
            echo "hi!"
remote:
  views: []
  jobs:
    - name: test job
      xml: |
        <?xml version="1.0" ?>
        <project>
          <actions/>
          <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
          <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
          <buildWrappers/>
          <builders>
            <hudson.tasks.Shell>
              <command>#!/usr/bin/env bash
        set -eux
        echo &quot;hi!&quot;</command>
            </hudson.tasks.Shell>
          </builders>
          <canRoam>true</canRoam>
          <concurrentBuild>false</concurrentBuild>
        <description>A test job

        Team: Test
        &lt;!-- Managed by Jenkins Job Builder --&gt;</description>
          <displayName>Test Job</displayName>
          <keepDependencies>false</keepDependencies>
          <properties>
            <jenkins.model.BuildDiscarderProperty>
              <strategy class="hudson.tasks.LogRotator">
                <daysToKeep>-1</daysToKeep>
                <numToKeep>10</numToKeep>
                <artifactDaysToKeep>-1</artifactDaysToKeep>
                <artifactNumToKeep>-1</artifactNumToKeep>
              </strategy>
            </jenkins.model.BuildDiscarderProperty>
          </properties>
          <publishers/>
          <scm class="hudson.scm.NullSCM"/>
          <triggers class="vector">
            <hudson.triggers.TimerTrigger>
              <spec>@hourly</spec>
            </hudson.triggers.TimerTrigger>
          </triggers>
        </project>
output_default: |
  No changes.
output_yaml: |
  No changes.
output_json: |
  []
---
name: one line change
local: |
  ---
  - job:
      name: test job
      display-name: Test Job
      description: |
        A test job

        Team: Test
      project-type: freestyle
      concurrent: false
      properties:
        - build-discarder:
            num-to-keep: 10
      triggers: [ { timed: '@hourly' } ]
      builders:
        - shell: |
            #!/usr/bin/env bash
            set -eux
            echo "hi!"
remote:
  views: []
  jobs:
    - name: test job
      xml: |
        <?xml version="1.0" ?>
        <project>
          <actions/>
          <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
          <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
          <buildWrappers/>
          <builders>
            <hudson.tasks.Shell>
              <command>#!/usr/bin/env bash
        set -eux
        echo &quot;goodbye!&quot;</command>
            </hudson.tasks.Shell>
          </builders>
          <canRoam>true</canRoam>
          <concurrentBuild>false</concurrentBuild>
        <description>A test job

        Team: Test
        &lt;!-- Managed by Jenkins Job Builder --&gt;</description>
          <displayName>Test Job</displayName>
          <keepDependencies>false</keepDependencies>
          <properties>
            <jenkins.model.BuildDiscarderProperty>
              <strategy class="hudson.tasks.LogRotator">
                <daysToKeep>-1</daysToKeep>
                <numToKeep>10</numToKeep>
                <artifactDaysToKeep>-1</artifactDaysToKeep>
                <artifactNumToKeep>-1</artifactNumToKeep>
              </strategy>
            </jenkins.model.BuildDiscarderProperty>
          </properties>
          <publishers/>
          <scm class="hudson.scm.NullSCM"/>
          <triggers class="vector">
            <hudson.triggers.TimerTrigger>
              <spec>@hourly</spec>
            </hudson.triggers.TimerTrigger>
          </triggers>
        </project>
output_default: |
  --- test job

  +++ test job

  @@ -8,7 +8,7 @@

       <hudson.tasks.Shell>
         <command>#!/usr/bin/env bash
   set -eux
  -echo &quot;goodbye!&quot;</command>
  +echo &quot;hi!&quot;</command>
       </hudson.tasks.Shell>
     </builders>
     <canRoam>true</canRoam>

  ---

   ~ test job

  Jobs/Views added 0, updated 1, removed 0.

output_yaml: |
 ---
 - job:
     name: test job
     before_xml: |
       <?xml version="1.0" ?>
       <project>
         <actions/>
         <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
         <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
         <buildWrappers/>
         <builders>
           <hudson.tasks.Shell>
             <command>#!/usr/bin/env bash
       set -eux
       echo &quot;goodbye!&quot;</command>
           </hudson.tasks.Shell>
         </builders>
         <canRoam>true</canRoam>
         <concurrentBuild>false</concurrentBuild>
         <description>A test job

       Team: Test
       &lt;!-- Managed by Jenkins Job Builder --&gt;</description>
         <displayName>Test Job</displayName>
         <keepDependencies>false</keepDependencies>
         <properties>
           <jenkins.model.BuildDiscarderProperty>
             <strategy class="hudson.tasks.LogRotator">
               <daysToKeep>-1</daysToKeep>
               <numToKeep>10</numToKeep>
               <artifactDaysToKeep>-1</artifactDaysToKeep>
               <artifactNumToKeep>-1</artifactNumToKeep>
             </strategy>
           </jenkins.model.BuildDiscarderProperty>
         </properties>
         <publishers/>
         <scm class="hudson.scm.NullSCM"/>
         <triggers class="vector">
           <hudson.triggers.TimerTrigger>
             <spec>@hourly</spec>
           </hudson.triggers.TimerTrigger>
         </triggers>
       </project>

     after_xml: |
       <?xml version="1.0" ?>
       <project>
         <actions/>
         <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
         <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
         <buildWrappers/>
         <builders>
           <hudson.tasks.Shell>
             <command>#!/usr/bin/env bash
       set -eux
       echo &quot;hi!&quot;</command>
           </hudson.tasks.Shell>
         </builders>
         <canRoam>true</canRoam>
         <concurrentBuild>false</concurrentBuild>
         <description>A test job

       Team: Test
       &lt;!-- Managed by Jenkins Job Builder --&gt;</description>
         <displayName>Test Job</displayName>
         <keepDependencies>false</keepDependencies>
         <properties>
           <jenkins.model.BuildDiscarderProperty>
             <strategy class="hudson.tasks.LogRotator">
               <daysToKeep>-1</daysToKeep>
               <numToKeep>10</numToKeep>
               <artifactDaysToKeep>-1</artifactDaysToKeep>
               <artifactNumToKeep>-1</artifactNumToKeep>
             </strategy>
           </jenkins.model.BuildDiscarderProperty>
         </properties>
         <publishers/>
         <scm class="hudson.scm.NullSCM"/>
         <triggers class="vector">
           <hudson.triggers.TimerTrigger>
             <spec>@hourly</spec>
           </hudson.triggers.TimerTrigger>
         </triggers>
       </project>

     diff: |
       --- test job
       +++ test job
       -echo &quot;goodbye!&quot;</command>
       +echo &quot;hi!&quot;</command>

     metadata: Test
     change_type: update
output_json: |
  [
    {
      "name" : "test job",
      "before_xml": [ "&lt;?xml version=&#34;1.0&#34; ?&gt;",
       "&lt;project&gt;",
       "  &lt;actions/&gt;",
       "  &lt;blockBuildWhenDownstreamBuilding&gt;false&lt;/blockBuildWhenDownstreamBuilding&gt;",
       "  &lt;blockBuildWhenUpstreamBuilding&gt;false&lt;/blockBuildWhenUpstreamBuilding&gt;",
       "  &lt;buildWrappers/&gt;",
       "  &lt;builders&gt;",
       "    &lt;hudson.tasks.Shell&gt;",
       "      &lt;command&gt;#!/usr/bin/env bash",
       "set -eux",
       "echo &amp;quot;goodbye!&amp;quot;&lt;/command&gt;",
       "    &lt;/hudson.tasks.Shell&gt;",
       "  &lt;/builders&gt;",
       "  &lt;canRoam&gt;true&lt;/canRoam&gt;",
       "  &lt;concurrentBuild&gt;false&lt;/concurrentBuild&gt;",
       "  &lt;description&gt;A test job",
       "",
       "Team: Test",
       "&amp;lt;!-- Managed by Jenkins Job Builder --&amp;gt;&lt;/description&gt;",
       "  &lt;displayName&gt;Test Job&lt;/displayName&gt;",
       "  &lt;keepDependencies&gt;false&lt;/keepDependencies&gt;",
       "  &lt;properties&gt;",
       "    &lt;jenkins.model.BuildDiscarderProperty&gt;",
       "      &lt;strategy class=&#34;hudson.tasks.LogRotator&#34;&gt;",
       "        &lt;daysToKeep&gt;-1&lt;/daysToKeep&gt;",
       "        &lt;numToKeep&gt;10&lt;/numToKeep&gt;",
       "        &lt;artifactDaysToKeep&gt;-1&lt;/artifactDaysToKeep&gt;",
       "        &lt;artifactNumToKeep&gt;-1&lt;/artifactNumToKeep&gt;",
       "      &lt;/strategy&gt;",
       "    &lt;/jenkins.model.BuildDiscarderProperty&gt;",
       "  &lt;/properties&gt;",
       "  &lt;publishers/&gt;",
       "  &lt;scm class=&#34;hudson.scm.NullSCM&#34;/&gt;",
       "  &lt;triggers class=&#34;vector&#34;&gt;",
       "    &lt;hudson.triggers.TimerTrigger&gt;",
       "      &lt;spec&gt;@hourly&lt;/spec&gt;",
       "    &lt;/hudson.triggers.TimerTrigger&gt;",
       "  &lt;/triggers&gt;",
       "&lt;/project&gt;",
       ""],
      "after_xml": [ "&lt;?xml version=&#34;1.0&#34; ?&gt;",
       "&lt;project&gt;",
       "  &lt;actions/&gt;",
       "  &lt;blockBuildWhenDownstreamBuilding&gt;false&lt;/blockBuildWhenDownstreamBuilding&gt;",
       "  &lt;blockBuildWhenUpstreamBuilding&gt;false&lt;/blockBuildWhenUpstreamBuilding&gt;",
       "  &lt;buildWrappers/&gt;",
       "  &lt;builders&gt;",
       "    &lt;hudson.tasks.Shell&gt;",
       "      &lt;command&gt;#!/usr/bin/env bash",
       "set -eux",
       "echo &amp;quot;hi!&amp;quot;&lt;/command&gt;",
       "    &lt;/hudson.tasks.Shell&gt;",
       "  &lt;/builders&gt;",
       "  &lt;canRoam&gt;true&lt;/canRoam&gt;",
       "  &lt;concurrentBuild&gt;false&lt;/concurrentBuild&gt;",
       "  &lt;description&gt;A test job",
       "",
       "Team: Test",
       "&amp;lt;!-- Managed by Jenkins Job Builder --&amp;gt;&lt;/description&gt;",
       "  &lt;displayName&gt;Test Job&lt;/displayName&gt;",
       "  &lt;keepDependencies&gt;false&lt;/keepDependencies&gt;",
       "  &lt;properties&gt;",
       "    &lt;jenkins.model.BuildDiscarderProperty&gt;",
       "      &lt;strategy class=&#34;hudson.tasks.LogRotator&#34;&gt;",
       "        &lt;daysToKeep&gt;-1&lt;/daysToKeep&gt;",
       "        &lt;numToKeep&gt;10&lt;/numToKeep&gt;",
       "        &lt;artifactDaysToKeep&gt;-1&lt;/artifactDaysToKeep&gt;",
       "        &lt;artifactNumToKeep&gt;-1&lt;/artifactNumToKeep&gt;",
       "      &lt;/strategy&gt;",
       "    &lt;/jenkins.model.BuildDiscarderProperty&gt;",
       "  &lt;/properties&gt;",
       "  &lt;publishers/&gt;",
       "  &lt;scm class=&#34;hudson.scm.NullSCM&#34;/&gt;",
       "  &lt;triggers class=&#34;vector&#34;&gt;",
       "    &lt;hudson.triggers.TimerTrigger&gt;",
       "      &lt;spec&gt;@hourly&lt;/spec&gt;",
       "    &lt;/hudson.triggers.TimerTrigger&gt;",
       "  &lt;/triggers&gt;",
       "&lt;/project&gt;",
       ""],
      "diff": [ "--- test job",
      "+++ test job",
      "-echo &quot;goodbye!&quot;</command>",
      "+echo &quot;hi!&quot;</command>",
      ""],
      "metadata": "Test",
      "change_type": "update",
    },
  ]
